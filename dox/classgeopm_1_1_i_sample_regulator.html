<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>geopm: geopm::ISampleRegulator Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">geopm
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacegeopm.html">geopm</a></li><li class="navelem"><a class="el" href="classgeopm_1_1_i_sample_regulator.html">ISampleRegulator</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classgeopm_1_1_i_sample_regulator-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">geopm::ISampleRegulator Class Reference<span class="mlabels"><span class="mlabel">abstract</span></span></div>  </div>
</div><!--header-->
<div class="contents">

<p>Class merges Platform and <a class="el" href="classgeopm_1_1_profile.html">Profile</a> time series data.  
 <a href="classgeopm_1_1_i_sample_regulator.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_sample_regulator_8hpp_source.html">SampleRegulator.hpp</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for geopm::ISampleRegulator:</div>
<div class="dyncontent">
<div class="center"><img src="classgeopm_1_1_i_sample_regulator__inherit__graph.png" border="0" usemap="#geopm_1_1_i_sample_regulator_inherit__map" alt="Inheritance graph"/></div>
<map name="geopm_1_1_i_sample_regulator_inherit__map" id="geopm_1_1_i_sample_regulator_inherit__map">
<area shape="rect" id="node2" href="classgeopm_1_1_sample_regulator.html" title="geopm::SampleRegulator" alt="" coords="7,80,176,107"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a4199a2bfc5d2236b6e48234b0cd9be36"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeopm_1_1_i_sample_regulator.html#a4199a2bfc5d2236b6e48234b0cd9be36">ISampleRegulator</a> ()=default</td></tr>
<tr class="separator:a4199a2bfc5d2236b6e48234b0cd9be36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5207740f99b84ecb03d03b7588236f1f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeopm_1_1_i_sample_regulator.html#a5207740f99b84ecb03d03b7588236f1f">ISampleRegulator</a> (const <a class="el" href="classgeopm_1_1_i_sample_regulator.html">ISampleRegulator</a> &amp;other)=default</td></tr>
<tr class="separator:a5207740f99b84ecb03d03b7588236f1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e2b33d50d761f0f4dcaaed44fd75992"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeopm_1_1_i_sample_regulator.html#a3e2b33d50d761f0f4dcaaed44fd75992">~ISampleRegulator</a> ()=default</td></tr>
<tr class="separator:a3e2b33d50d761f0f4dcaaed44fd75992"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa80ea68a4c99aecb6e3bdd161632d242"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeopm_1_1_i_sample_regulator.html#aa80ea68a4c99aecb6e3bdd161632d242">operator()</a> (const struct <a class="el" href="structgeopm__time__s.html">geopm_time_s</a> &amp;platform_sample_time, std::vector&lt; double &gt;::const_iterator platform_sample_begin, std::vector&lt; double &gt;::const_iterator platform_sample_end, std::vector&lt; std::pair&lt; uint64_t, struct <a class="el" href="structgeopm__prof__message__s.html">geopm_prof_message_s</a> &gt; &gt;::const_iterator prof_sample_begin, std::vector&lt; std::pair&lt; uint64_t, struct <a class="el" href="structgeopm__prof__message__s.html">geopm_prof_message_s</a> &gt; &gt;::const_iterator prof_sample_end, std::vector&lt; double &gt; &amp;aligned_signal, std::vector&lt; uint64_t &gt; &amp;region_id)=0</td></tr>
<tr class="memdesc:aa80ea68a4c99aecb6e3bdd161632d242"><td class="mdescLeft">&#160;</td><td class="mdescRight">The parenthesis operator which implements the <a class="el" href="classgeopm_1_1_sample_regulator.html">SampleRegulator</a> functor.  <a href="#aa80ea68a4c99aecb6e3bdd161632d242">More...</a><br /></td></tr>
<tr class="separator:aa80ea68a4c99aecb6e3bdd161632d242"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a749aab57fdb1077a2c974d8d75d715a8"><td class="memItemLeft" align="right" valign="top">virtual const std::map&lt; int, int &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeopm_1_1_i_sample_regulator.html#a749aab57fdb1077a2c974d8d75d715a8">rank_idx_map</a> (void) const =0</td></tr>
<tr class="separator:a749aab57fdb1077a2c974d8d75d715a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Class merges Platform and <a class="el" href="classgeopm_1_1_profile.html">Profile</a> time series data. </p>
<p>The <a class="el" href="classgeopm_1_1_sample_regulator.html">SampleRegulator</a> class is a functor used by the <a class="el" href="classgeopm_1_1_controller.html">Controller</a> to create coherent samples while merging data collected from the Platform and the <a class="el" href="classgeopm_1_1_profile_sampler.html" title="Retrieves sample data from the set of application ranks on a single node. ">ProfileSampler</a>. The <a class="el" href="classgeopm_1_1_profile_sampler.html" title="Retrieves sample data from the set of application ranks on a single node. ">ProfileSampler</a> progress and runtime data is collected asynchronously by each MPI rank whenever the application MPI ranks use the <a class="el" href="classgeopm_1_1_profile.html">Profile</a> interface. The Platform sample comprises a vector of doubles collected synchronously. The cadence of the Platform samples is determined by the <a class="el" href="classgeopm_1_1_controller.html">Controller</a>. The application progress and runtime data for the region are written some time prior to the collection of the Platform sample and each have an associated time stamp. The <a class="el" href="classgeopm_1_1_sample_regulator.html">SampleRegulator</a> extrapolates the application provided progress and runtime for each MPI rank to the time when the Platform was sampled. The extrapolated application data is then bundled with the hardware data. This bundled data is transformed into a basis that linearly combines measurements of the same metric so that the combination is representative of the given metric for each domain of control. This transformation matrix is an input which is provided by the Platform.</p>
<p>The class is a functor and has only one public member function, the operator (). This class has been separated from the <a class="el" href="classgeopm_1_1_controller.html">Controller</a> to encapsulate this one operation and facilitate independent testing of this feature. The operator () method is broken down into four steps, each represented by a private method, this enables individual testing of each step. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a4199a2bfc5d2236b6e48234b0cd9be36"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4199a2bfc5d2236b6e48234b0cd9be36">&#9670;&nbsp;</a></span>ISampleRegulator() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">geopm::ISampleRegulator::ISampleRegulator </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a5207740f99b84ecb03d03b7588236f1f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5207740f99b84ecb03d03b7588236f1f">&#9670;&nbsp;</a></span>ISampleRegulator() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">geopm::ISampleRegulator::ISampleRegulator </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classgeopm_1_1_i_sample_regulator.html">ISampleRegulator</a> &amp;&#160;</td>
          <td class="paramname"><em>other</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a3e2b33d50d761f0f4dcaaed44fd75992"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3e2b33d50d761f0f4dcaaed44fd75992">&#9670;&nbsp;</a></span>~ISampleRegulator()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual geopm::ISampleRegulator::~ISampleRegulator </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span><span class="mlabel">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="aa80ea68a4c99aecb6e3bdd161632d242"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa80ea68a4c99aecb6e3bdd161632d242">&#9670;&nbsp;</a></span>operator()()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void geopm::ISampleRegulator::operator() </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structgeopm__time__s.html">geopm_time_s</a> &amp;&#160;</td>
          <td class="paramname"><em>platform_sample_time</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; double &gt;::const_iterator&#160;</td>
          <td class="paramname"><em>platform_sample_begin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; double &gt;::const_iterator&#160;</td>
          <td class="paramname"><em>platform_sample_end</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; std::pair&lt; uint64_t, struct <a class="el" href="structgeopm__prof__message__s.html">geopm_prof_message_s</a> &gt; &gt;::const_iterator&#160;</td>
          <td class="paramname"><em>prof_sample_begin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; std::pair&lt; uint64_t, struct <a class="el" href="structgeopm__prof__message__s.html">geopm_prof_message_s</a> &gt; &gt;::const_iterator&#160;</td>
          <td class="paramname"><em>prof_sample_end</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; double &gt; &amp;&#160;</td>
          <td class="paramname"><em>aligned_signal</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; uint64_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>region_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The parenthesis operator which implements the <a class="el" href="classgeopm_1_1_sample_regulator.html">SampleRegulator</a> functor. </p>
<p>This operator implements the public functionality of the <a class="el" href="classgeopm_1_1_sample_regulator.html">SampleRegulator</a> class, see class description for more details. In short, the data from the Platform object is bundled with extrapolated <a class="el" href="classgeopm_1_1_profile_sampler.html" title="Retrieves sample data from the set of application ranks on a single node. ">ProfileSampler</a> data and transformed to describe the domains of control.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">platform_sample_time</td><td>The time when the Platform was sampled which is the time that the <a class="el" href="classgeopm_1_1_profile_sampler.html" title="Retrieves sample data from the set of application ranks on a single node. ">ProfileSampler</a> data is extrapolated to.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">signal_domain_matrix</td><td>Matrix used to transform the extrapolated data to model the domains of control. This matrix is provided by the Platform. See the Platform for more information.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">platform_sample_begin</td><td>A vector iterator referencing the beginning of the Platform sample data.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">platform_sample_end</td><td>A vector iterator referencing the end of the Platform sample data.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">prof_sample_begin</td><td>A vector iterator referencing the beginning of the <a class="el" href="classgeopm_1_1_profile_sampler.html" title="Retrieves sample data from the set of application ranks on a single node. ">ProfileSampler</a> sample data.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">prof_sample_end</td><td>A vector iterator referencing the end of the <a class="el" href="classgeopm_1_1_profile_sampler.html" title="Retrieves sample data from the set of application ranks on a single node. ">ProfileSampler</a> sample data.</td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">telemetry</td><td>A vector of geopm_telemetry_message_s structures which are in the order of the domains of control defined in a Policy object. </td></tr>
  </table>
  </dd>
</dl>

<p>Implemented in <a class="el" href="classgeopm_1_1_sample_regulator.html#a5f4c2ada70ef1d7801973469978899c4">geopm::SampleRegulator</a>.</p>

</div>
</div>
<a id="a749aab57fdb1077a2c974d8d75d715a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a749aab57fdb1077a2c974d8d75d715a8">&#9670;&nbsp;</a></span>rank_idx_map()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual const std::map&lt;int, int&gt;&amp; geopm::ISampleRegulator::rank_idx_map </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implemented in <a class="el" href="classgeopm_1_1_sample_regulator.html#ae762fadeea0e60192c6135455f833d84">geopm::SampleRegulator</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>src/<a class="el" href="_sample_regulator_8hpp_source.html">SampleRegulator.hpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
