<!DOCTYPE html>
<html>
<head>
  <meta http-equiv='content-type' value='text/html;charset=utf8'>
  <meta name='generator' value='Ronn/v0.7.3 (http://github.com/rtomayko/ronn/tree/0.7.3)'>
  <title>geopmanalysis(1) - run application and visualize results</title>
  <style type='text/css' media='all'>
  /* style: man */
  body#manpage {margin:0}
  .mp {max-width:100ex;padding:0 9ex 1ex 4ex}
  .mp p,.mp pre,.mp ul,.mp ol,.mp dl {margin:0 0 20px 0}
  .mp h2 {margin:10px 0 0 0}
  .mp > p,.mp > pre,.mp > ul,.mp > ol,.mp > dl {margin-left:8ex}
  .mp h3 {margin:0 0 0 4ex}
  .mp dt {margin:0;clear:left}
  .mp dt.flush {float:left;width:8ex}
  .mp dd {margin:0 0 0 9ex}
  .mp h1,.mp h2,.mp h3,.mp h4 {clear:left}
  .mp pre {margin-bottom:20px}
  .mp pre+h2,.mp pre+h3 {margin-top:22px}
  .mp h2+pre,.mp h3+pre {margin-top:5px}
  .mp img {display:block;margin:auto}
  .mp h1.man-title {display:none}
  .mp,.mp code,.mp pre,.mp tt,.mp kbd,.mp samp,.mp h3,.mp h4 {font-family:monospace;font-size:14px;line-height:1.42857142857143}
  .mp h2 {font-size:16px;line-height:1.25}
  .mp h1 {font-size:20px;line-height:2}
  .mp {text-align:justify;background:#fff}
  .mp,.mp code,.mp pre,.mp pre code,.mp tt,.mp kbd,.mp samp {color:#131211}
  .mp h1,.mp h2,.mp h3,.mp h4 {color:#030201}
  .mp u {text-decoration:underline}
  .mp code,.mp strong,.mp b {font-weight:bold;color:#131211}
  .mp em,.mp var {font-style:italic;color:#232221;text-decoration:none}
  .mp a,.mp a:link,.mp a:hover,.mp a code,.mp a pre,.mp a tt,.mp a kbd,.mp a samp {color:#0000ff}
  .mp b.man-ref {font-weight:normal;color:#434241}
  .mp pre {padding:0 4ex}
  .mp pre code {font-weight:normal;color:#434241}
  .mp h2+pre,h3+pre {padding-left:0}
  ol.man-decor,ol.man-decor li {margin:3px 0 10px 0;padding:0;float:left;width:33%;list-style-type:none;text-transform:uppercase;color:#999;letter-spacing:1px}
  ol.man-decor {width:100%}
  ol.man-decor li.tl {text-align:left}
  ol.man-decor li.tc {text-align:center;letter-spacing:4px}
  ol.man-decor li.tr {text-align:right;float:right}
  </style>
</head>
<!--
  The following styles are deprecated and will be removed at some point:
  div#man, div#man ol.man, div#man ol.head, div#man ol.man.

  The .man-page, .man-decor, .man-head, .man-foot, .man-title, and
  .man-navigation should be used instead.
-->
<body id='manpage'>
  <div class='mp' id='man'>

  <div class='man-navigation' style='display:none'>
    <a href="#NAME">NAME</a>
    <a href="#SYNOPSIS">SYNOPSIS</a>
    <a href="#DESCRIPTION">DESCRIPTION</a>
    <a href="#ANALYSIS-TYPES">ANALYSIS TYPES</a>
    <a href="#COMMON-OPTIONS-FOR-ALL-ANALYSIS-TYPES">COMMON OPTIONS FOR ALL ANALYSIS TYPES</a>
    <a href="#OPTIONS-FOR-FREQUENCY-SWEEP-BASED-ANALYSIS">OPTIONS FOR FREQUENCY SWEEP-BASED ANALYSIS</a>
    <a href="#EXAMPLES">EXAMPLES</a>
    <a href="#COPYRIGHT">COPYRIGHT</a>
    <a href="#SEE-ALSO">SEE ALSO</a>
  </div>

  <ol class='man-decor man-head man head'>
    <li class='tl'>geopmanalysis(1)</li>
    <li class='tc'></li>
    <li class='tr'>geopmanalysis(1)</li>
  </ol>

  <h2 id="NAME">NAME</h2>
<p class="man-name">
  <code>geopmanalysis</code> - <span class="man-whatis">run application and visualize results</span>
</p>

<h2 id="SYNOPSIS">SYNOPSIS</h2>

<p><code>geopmanalysis</code> <em>ANALYSIS_TYPE</em> [<em>OPTIONS</em>] -- <em>EXEC</em> [<em>EXEC_ARGS</em>]</p>

<h2 id="DESCRIPTION">DESCRIPTION</h2>

<p>Used to run applications and analyze results for specific GEOPM use
cases.  An application must be launched at least once to generate
report files. When using geopmanalysis to launch applications, it must
be run within an allocation to ensure that all runs use the same set
of nodes. Once all the required reports have been generated, the
analysis can be rerun without needing an allocation using the
<code>--skip-launch</code> option.  Using the <code>--output-dir</code> option to specify
a unique directory for each analysis is highly recommended so that
reports and traces from different experiments are not combined by
mistake.</p>

<h2 id="ANALYSIS-TYPES">ANALYSIS TYPES</h2>

<p>The available analysis types are:</p>

<dl>
<dt><em>freq_sweep</em></dt><dd><p>Runs the application at each available frequency. Compared to the baseline
frequency, finds the lowest frequency for each region at which the performance
will not be degraded by more than a given margin.</p></dd>
<dt class="flush"><em>offline</em></dt><dd><p>Compares the energy efficiency plugin in offline mode to the
baseline at sticker frequency.</p></dd>
<dt class="flush"><em>online</em></dt><dd><p>Compares the energy efficiency plugin in online mode to the
baseline at sticker frequency.</p></dd>
<dt><em>stream_mix</em></dt><dd><p>Runs a full frequency sweep, then offline and online modes of the
energy efficieny plugin. The energy and runtime of the
application best-fit, per-phase offline mode, and per-phase
online mode are compared to the run a sticker frequency.</p></dd>
</dl>


<h2 id="COMMON-OPTIONS-FOR-ALL-ANALYSIS-TYPES">COMMON OPTIONS FOR ALL ANALYSIS TYPES</h2>

<dl>
<dt><code>-h</code>, <code>--help</code></dt><dd><p>Show help message and exit.  When used with an analysis type, it
shows additional options for that analysis.</p></dd>
<dt><code>-o</code>, <code>--output-dir</code> <em>OUTPUT_DIR</em></dt><dd><p>The output directory for reports, traces, and plots (default: '.').</p></dd>
<dt><code>-p</code>, <code>--profile-prefix</code> <em>PREFIX</em></dt><dd><p>Prefix to prepend to profile name when launching. Depending on the
type of analysis, several profiles will be generated. For example,
the freq_sweep analysis appends the frequency for each run to this
prefix.</p></dd>
<dt><code>--summary</code></dt><dd><p>Print a summary of the data depending on the analysis type.</p></dd>
<dt class="flush"><code>--plot</code></dt><dd><p>Generate plots of the data.</p></dd>
<dt><code>-n</code>, <code>--num-rank</code> <em>NUM_RANKS</em></dt><dd><p>Total number of application ranks to launch with. Because
geopmanalysis uses the GEOPM launch method "process" there will be
one extra rank launched per node in addition to the number of
application ranks specified by this option.</p></dd>
<dt><code>-N</code>, <code>--num-node</code> <em>NUM_NODES</em></dt><dd><p>Number of compute nodes to launch onto.  Note that this option is
<code>not</code> propagated to the underlying launch application; for instance
if ALPS is the application launch backend, this option does not
specify the number of ranks per node.</p></dd>
<dt><code>-s</code>, <code>--skip-launch</code></dt><dd><p>Do not launch jobs, only analyze existing data.</p></dd>
<dt><code>--version</code></dt><dd><p>Show the GEOPM version number and exit.</p></dd>
<dt><code>-v</code>, <code>--verbose</code></dt><dd><p>Print verbose debugging information.</p></dd>
<dt><code>--geopm-ctl</code> <em>GEOPM_CTL</em></dt><dd><p>Launch type for the GEOPM controller.  Available GEOPM_CTL values:
process, pthread, or application (default 'process').</p></dd>
<dt><code>--iterations</code> <em>NUM_ITERATIONS</em></dt><dd><p>Number of iterations to perform for every type of analysis.
E.g. for the OfflineFrequencyAnalysis, <em>NUM_ITERATIONS</em> runs will be
performed at every available frequency.  The data is averaged
together prior to evaluating what the best per-region frequency
is. (default: <em>1</em>)</p></dd>
</dl>


<h2 id="OPTIONS-FOR-FREQUENCY-SWEEP-BASED-ANALYSIS">OPTIONS FOR FREQUENCY SWEEP-BASED ANALYSIS</h2>

<dl>
<dt><code>--min-freq</code></dt><dd><p>The minimum frequency to use for the sweep and analysis.  If out of
range, the minimum available frequency on the platform will be used.</p></dd>
<dt><code>--max-freq</code></dt><dd><p>The maximum frequency to use for the sweep and analysis.  If out of
range, the maximum available frequency on the platform will be used.</p></dd>
<dt><code>--enable-turbo</code></dt><dd><p>When calculating the best per region frequencies, this flag
stipulates that frequencies in the turbo range should be considered.
By default, this flag is not set meaning frequencies in the turbo
range are not considered.</p></dd>
</dl>


<h2 id="EXAMPLES">EXAMPLES</h2>

<p>  Once the geopmpy modules are installed, you can invoke this utility
  directly from the command line.  You can either run the utility from
  inside a directory containing data, or from a remote directory.
  Some examples follow:</p>

<p>  The <em>freq_sweep</em> analysis type runs the application once at each
  available frequency on the platform. The summary generated from this
  analysis can be used for other types of analysis. The output from
  the frequency sweep is a mapping of the best-fit frequency for each
  region that saves energy while not letting the runtime increase more
  than 10%.  It can also generate plots of the runtime and energy of
  each region at each frequency setting.</p>

<pre><code>geopmanalysis freq_sweep -p myprof -o myprof -N1 -n1 --summary -- ./build/bin/geopmbench config.json
</code></pre>

<p>  The <em>offline</em> analysis type runs a frequency sweep (if reports are
  not already present) to determine the best-fit frequency for each
  region of the application. Then it runs the application using the
  EnergyEfficientAgent plugin, which uses this mapping to change the
  frequency when entering each region. The <em>online</em> analysis type is
  similar except that it determines the best-fit frequency through
  online training.</p>

<pre><code>geopmanalysis offline -p myprof -o myprof -N1 -n1 -- ./build/bin/geopmbench config.json
</code></pre>

<p>  The <em>stream_mix</em> analysis type uses the geopmbench application and
  varies the ratio between the runtimes of the stream and dgemm
  regions from around 20% stream to around 80% stream. For each ratio,
  it launches a frequency sweep and the offline and online analysis
  modes described above. The resulting analysis produces plots
  comparing the runtime and energy savings of the different plugin
  modes at each stream mix ratio.</p>

<pre><code>geopmanalysis stream_mix -p myprof -o myprof --summary -N1 -n1 -- ./build/bin/geopmbench config.json
</code></pre>

<p>  If an analysis launch has been run once, the same data can be reused
  using the --skip-launch options without supplying launch options
  (number of nodes, application arguments, etc.).  This option can
  also be used to analyze reports and traces generated through another
  launch method, provided that the profile names and file names are
  consistent with what the analysis expects.  For example, the
  following command generates plots for the previous analysis:</p>

<pre><code>geopmanalysis stream_mix -p myprof -o myprof --plot -s --min-freq 1.0e9 --max-freq 2.0e9
</code></pre>

<h2 id="COPYRIGHT">COPYRIGHT</h2>

<p>Copyright (c) 2015, 2016, 2017, 2018, Intel Corporation. All rights reserved.</p>

<h2 id="SEE-ALSO">SEE ALSO</h2>

<p><strong><a class="man-ref" href="geopm.7.html">geopm<span class="s">(7)</span></a></strong>,
<strong><a class="man-ref" href="geopmpy.7.html">geopmpy<span class="s">(7)</span></a></strong>,
<strong><a class="man-ref" href="geopmaprun.1.html">geopmaprun<span class="s">(1)</span></a></strong>,
<strong><a class="man-ref" href="geopmbench.1.html">geopmbench<span class="s">(1)</span></a></strong>,
<strong><a class="man-ref" href="geopmplotter.1.html">geopmplotter<span class="s">(1)</span></a></strong>,
<strong><a class="man-ref" href="geopmsrun.1.html">geopmsrun<span class="s">(1)</span></a></strong></p>


  <ol class='man-decor man-foot man foot'>
    <li class='tl'>Intel Corporation</li>
    <li class='tc'>November 2018</li>
    <li class='tr'>geopmanalysis(1)</li>
  </ol>

  </div>
</body>
</html>
